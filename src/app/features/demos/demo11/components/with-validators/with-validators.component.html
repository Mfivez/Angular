<div class="concept form-container">
    <h3>Formulaire via Validators</h3>

    <form  [formGroup]="myForm">
        @for (field of formFields; track $index) {
            <div class="form-group">
                <label [for]="field.controlName"><strong>{{ field.label }}</strong></label>
                
                <span>
                    @if (myForm.controls[field.controlName].valid) {âœ…}
                    @if (field.inputType?.type == "selector") {
                        <select class="custom-input" [formControlName]="field.controlName"  [ngClass]="{error: myForm.controls[field.controlName].touched && !myForm.controls[field.controlName].valid}">
                        @for (option of field.inputType?.params; track $index) {
                            <option [value]="option">{{option}}</option>
                        }
                        </select>
                    } @else {
                        <input class="custom-input" [type]="field.type"  [formControlName]="field.controlName" [ngClass]="{ 
                        error : myForm.controls[field.controlName].touched && !myForm.controls[field.controlName].valid }">
                    }
                    
                </span>
                @if (myForm.controls[field.controlName].touched && !myForm.controls[field.controlName].valid) {<span class="error">{{field.validatorMessage}}</span>}
                </div>
        }


        <div class="form-group">
            <button class="cta-button" (click)="sendFG()" [disabled]="!myForm.valid">S'inscrire</button>
        </div>
        
        <hr>

        <h3>Form Control (abstractControl) : Etat global du formulaire :</h3>
        <p><strong>Le formulaire :</strong></p>
            <ul>
                @if (myForm.pristine) {<li><p>n'a pas subi la moindre modification de l'utilisateur.âœ…</p></li>}
                @if (myForm.touched) {<li><p>a Ã©tÃ© touchÃ© par l'utilisateur! âœ…</p></li>}
                @if (myForm.invalid) {<li><p>possÃ¨de un attribut invalide! ðŸŸ¥</p></li>}
                @if (myForm.valid) {<li><p>est totalement valide! âœ…</p></li>}
            </ul>
    </form>

</div>

<!--Pristine = immaculÃ© => le formulaire global n'a pas Ã©tÃ© modifiÃ©-->